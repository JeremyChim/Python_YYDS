# Python_YYDS

å°é“­ç”¨æ¥è®°å½•ä¸‹PythonæŠ€å·§çš„ä¸€ä¸ªå°æœ¬å­ğŸ¤£ğŸ˜ƒğŸ¤ªğŸ•ğŸ”ğŸŸğŸŒ­ğŸ¿

# å®‰è£…Pythonç¯å¢ƒ

1. ä¸‹è½½[Python](https://www.python.org/downloads/windows/)

2. ä¸‹è½½[PyCharm](https://www.jetbrains.com/pycharm/download/#section=windows)

3. ä¸‹è½½[Git](https://git-scm.com/downloads)

4. ä¸‹è½½[Github Desktop](https://desktop.github.com/)

5. å®‰è£…PyCharmæ’ä»¶
   
   > Chinese (Simplified) Language Pack / ä¸­æ–‡è¯­è¨€åŒ…
   > 
   > One Dark theme
   > 
   > CMD Support

6. æ–°å»ºPycharmProjecté¡¹ç›®
   
   > é€‰æ‹©ï¼šå…ˆå‰é…ç½®çš„è§£é‡Šå™¨
   > 
   > ä¸å‹¾é€‰ï¼šåˆ›å»ºmain.py

7. æ·»åŠ PyCharmé•œåƒæº
   
   > æ–‡ä»¶ > è®¾ç½® > é¡¹ç›® > Pythonè§£é‡Šå™¨ > + > ç®¡ç†ä»“åº“
   > 
   > | é•œåƒæº | ç½‘å€                                        | æ¨èåº¦   | å…ç¿»å¢™ |
   > |:--- |:----------------------------------------- |:----- |:---:|
   > | ä¸­ç§‘å¤§ | https://pypi.mirrors.ustc.edu.cn/simple/  | â˜…â˜…â˜…â˜…â˜… | âˆš   |
   > | å›½å¤–1 | https://pypi.sdutlinux.org                | â˜…â˜…â˜…â˜…â˜… |     |
   > | å›½å¤–2 | https://pypi.org/simple                   | â˜…â˜…â˜…â˜…  |     |
   > | é˜¿é‡Œäº‘ | http://mirrors.aliyun.com/pypi/simple/    | â˜…â˜…â˜…   | âˆš   |
   > | è±†ç“£  | http://pypi.douban.com/simple/            | â˜…â˜…â˜…   | âˆš   |
   > | æ¸…å  | https://pypi.tuna.tsinghua.edu.cn/simple/ | â˜…â˜…â˜…   | âˆš   |
   > | ä¸­ç§‘æŠ€ | http://pypi.mirrors.ustc.edu.cn/simple/   | â˜…â˜…â˜…   | âˆš   |

8. å®‰è£…å¸¸ç”¨ç¯å¢ƒåŒ…
   
   > pip3 install PyQt5
   > 
   > pip install PyQt5 -i https://pypi.douban.com/simple
   > 
   > æ–‡ä»¶ > è®¾ç½® > é¡¹ç›® > Pythonè§£é‡Šå™¨ > +
   > 
   > | åŒ…å           | ç”¨é€”       |
   > | ------------ | -------- |
   > | pyinstaller  | å°è£…exe    |
   > | ttkbootstrap | GUIç•Œé¢    |
   > | PyQt5        | GUIç•Œé¢    |
   > | openpyxl     | è¯»å†™ Excel |
   > | folium       | åœ°å›¾å¯è§†åŒ–    |

9. æ·»åŠ PyCharmç­¾å
   
   > è®¾ç½® > ç¼–è¾‘å™¨ > æ–‡ä»¶å’Œä»£ç æ¨¡ç‰ˆ > Python Script
   > 
   > ```python
   > # -*- coding: utf-8 -*-
   > # @Time ï¼š ${DATE} ${TIME}
   > # @Auth ï¼š Jeremy.Chim
   > # @File ï¼š${NAME}.py
   > # @IDE ï¼š${PRODUCT_NAME}
   > # @Github ï¼šhttps://github.com/JeremyChim/${PROJECT_NAME}
   > ```

# å¸¸ç”¨çš„å˜é‡å‘½åç¼©å†™

> [ç¼–ç¨‹è¯­è¨€ä¸­å¸¸ç”¨çš„å˜é‡å‘½åç¼©å†™_å‡å¦‚æˆ‘å¹´åæ­£å¥½çš„åšå®¢-CSDNåšå®¢](https://blog.csdn.net/qq_37851620/article/details/94731227)

| å…¨ç§°             | ç¼©å†™        | ç¿»è¯‘     |
| -------------- | --------- | ------ |
| calculate      | calc      | è®¡ç®—     |
| addition       | add       | åŠ       |
| subtraction    | sub       | å‡      |
| multiplication | mul       | ä¹˜æ³•     |
| division       | div       | é™¤æ³•     |
| hexadecimal    | hex       | åå…­è¿›åˆ¶   |
| array          | arr       | æ•°ç»„ã€é›†åˆ  |
| list           | lst       | åˆ—è¡¨     |
| Sequence       | seq       |        |
| Segment(s)     | seg       |        |
| stack          | stk       | æ ˆ      |
| dictionary     | dict      | å­—å…¸     |
| character      | char      | å­—ç¬¦     |
| string         | str       | å­—ç¬¦ä¸²    |
| text           | txt       | æ–‡æœ¬     |
| float          | flt       | æµ®åŠ¨ã€æµ®ç‚¹  |
| number         | num       | æ•°é‡ã€ç¼–å·  |
| image          | img       | å›¾åƒ     |
| bitmap         | bmp       | ä½å›¾     |
| table          | tbl       | è¡¨      |
| link           | lnk       | é“¾æ¥     |
| lable          | lbl       | æ ‡ç­¾     |
| flag           | flg       | æ ‡å¿—     |
| container      | cntr      | å®¹å™¨     |
| time stamp     | ts        | æ—¶é—´æˆ³    |
| length         | len       | é•¿åº¦     |
| positive       | pos       |        |
| negative       | neg       |        |
| statistic      | stat      | ç»Ÿè®¡     |
| summation      | sum       | å’Œ      |
| average        | avg       | å¹³å‡     |
| maximum        | max       | æœ€å¤§å€¼    |
| minimum        | min       | æœ€å°å€¼    |
| middle         | mid       | ä¸­å€¼     |
| increment      | inc       | å¢åŠ ã€å¢é‡  |
| increase       | inc       | å¢åŠ      |
| decrease       | dec       | å‡å°‘     |
| different      | diff      | ä¸åŒçš„    |
| frequency      | freq      | é¢‘ç‡     |
| optimization   | opt       | æœ€ä¼˜     |
| total          | tot       | å…¨éƒ¨çš„    |
| vertical       | vert      | å‚ç›´     |
| horizontal     | horz      | æ°´å¹³     |
| row            | row       | è¡Œ      |
| column         | col       | åˆ—      |
| positon        | pos       | ä½ç½®     |
| point          | pt        | ç‚¹      |
| pointer        | ptr       | æŒ‡é’ˆ     |
| index          | idx / ndx | ç´¢å¼•ã€æŒ‡ç¤º  |
| value          | val       | å€¼      |
| reference      | ref       | å¼•ç”¨     |
| status         | stat      | çŠ¶æ€     |
| original       | orig      | åŸä»¶     |
| source         | src       | æºå¤´     |
| address        | addr      | åœ°å€     |
| coordinates    | coord     | åæ ‡     |
| previous       | pre       | å‰ä¸€ä¸ª    |
| current        | cur       | å½“å‰çš„    |
| initalize      | init      | åˆå§‹åŒ–    |
| destination    | dst/dest  | ç›®çš„     |
| iteration      | itr/iter  | å¾ªç¯ã€è¿­ä»£  |
| count          | cnt       | è®¡æ•°å™¨    |
| temporary      | tempæˆ–tmp  | ä¸´æ—¶     |
| source         | src       | æºå¤´     |
| resource       | res       | èµ„æº     |
| result         | res       | ç»“æœ     |
| return         | ret       | è¿”å›     |
| return         | rtn       | è¿”å›     |
| answer         | ans       | å“åº”ã€å›ç­”  |
| buffer         | bufæˆ–buff  | ç¼“å†²åŒº    |
| database       | db        | æ•°æ®åº“    |
| administrator  | adm       | ç®¡ç†å‘˜    |
| password       | pwd       | å¯†ç      |
| user           | usr       | ç”¨æˆ·     |
| directory      | dir       | ç›®å½•     |
| document       | doc       | æ–‡æ¡£     |
| library        | lib       | åº“      |
| function       | func      | å‡½æ•°     |
| object         | obj       | å¯¹è±¡     |
| argument       | arg       | å®å‚     |
| instance       | ins       | å®ä¾‹     |
| variable       | var       | å˜é‡     |
| parameter      | param     | å‚æ•°(å½¢å‚) |
| encode         | enc       | ç¼–ç      |
| print          | prn       | æ‰“å°     |
| delete         | del       | åˆ é™¤     |
| insert         | ins       | æ’å…¥     |
| error          | err       | é”™è¯¯     |
| break          | brk       | é—´æ–­     |
| package        | pkg       | æ‰“åŒ…     |
| escape         | esc       | é€€å‡º     |
| execute        | exec      | æ‰§è¡Œ     |
| command        | cmd       | å‘½ä»¤     |
| configuration  | config    | é…ç½®     |
| edit           | edt       | ç¼–è¾‘     |
| display        | disp      | æ˜¾ç¤º     |
| initialize     | init      | åˆå§‹åŒ–    |
| trigger        | trig      | è§¦å‘     |
| capture        | capæˆ–capt  | æ•è·     |
| system         | sys       | ç³»ç»Ÿ     |
| environment    | env       | ç¯å¢ƒ     |
| window         | win(wnd)  | çª—å£     |
| device         | dev       | è®¾å¤‡     |
| message        | msg       | æ¶ˆæ¯     |
| signal         | sig       | ä¿¡å·     |
| information    | info      | ä¿¡æ¯     |
| error          | err       | é”™è¯¯     |

# å°†.qrcæ–‡ä»¶è½¬æ¢ä¸º.py(import xx_rcï¼Œè¿è¡ŒæŠ¥é”™)

```cmd
pyrcc5 resource.qrc -o resource_rc.py
```

# QT-Designeråˆ›å»ºMainWindow

```python
if __name__ == '__main__':
    import sys
    app = QtWidgets.QApplication(sys.argv)
    MainWindow = QtWidgets.QMainWindow()

    Ui = Ui_MainWindow()
    Ui.setupUi(MainWindow)

    MainWindow.show()
    sys.exit(app.exec_())
```

# QTPY5å®‰è£…åŠä½¿ç”¨æ–¹æ³•

> https://zhuanlan.zhihu.com/p/162866700

# ä½¿ç”¨UPXæŠ€æœ¯ä¼˜åŒ–å°è£…åŒ…

1. ä¸‹è½½[UPX](https://upx.github.io/)

2. è§£å‹ï¼ˆåªéœ€è¦upx.exeæ–‡ä»¶ï¼‰

3. æ”¾å…¥è·¯å¾„ï¼šD:\Python\Scripts\upx.exeï¼ˆå’Œpyinstaller.exeåŒçº§ï¼‰

4. å°è£…ï¼Œä¼šå‘ç°exeåŒ…å°äº†

> å®æµ‹æ•°æ®
> 
> | æµ‹è¯•åŒ…                | ä¼˜åŒ–å‰     | ä¼˜åŒ–å     | ä¼˜åŒ–ç©ºé—´   |
> | ------------------ | ------- | ------- | ------ |
> | ä»¥å¤ªç½‘æŠ¥æ–‡è§£æå·¥å…·v2.50.exe | 23.5 MB | 16.4 MB | 7.1MB  |
> | Great Wall.exe     | 22.5 MB | 15.5 MB | 7 MB   |
> | layout.exe         | 34.6 MB | 27.0 MB | 7.6 MB |

# å°è£…pyæ–‡ä»¶çš„batè„šæœ¬

```batch
Pyinstaller -F app.py
```

```batch
Pyinstaller -D app.py
```

```batch
Pyinstaller -F -w app.py
```

```batch
Pyinstaller -D -w app.py
```

```bash
Pyinstaller -F -w -i app.ico app.py
::Pyinstaller -D -w -i app.ico app.py
pause
```

# ttkçš„uiä½¿ç”¨super()å‡½æ•°çš„åŸç†

```python
import ttkbootstrap as ttk

class app(ttk.Frame):

    def __init__(self, win):
        super().__init__(win)
        self.pack()

if __name__ == '__main__':

    w = ttk.Window()
    a = app(w)
    w.mainloop()

    '''ä¸Šé¢ä»£ç ä½œç”¨å¦‚ä¸‹'''
    # w = ttk.Window()
    # a = ttk.Frame(w)
    # a.pack()
    # w.mainloop()
```

# tkkæ¨¡ç‰ˆ

[win.py](./win.py)

```python
# å¤–éƒ¨å‡½æ•°è°ƒç”¨ï¼ˆæŒ‡å®šå‡½æ•°ï¼‰
from ttkbootstrap.constants import *
from windnd import hook_dropfiles
from tkinter import filedialog
from tkinter.messagebox import showinfo
from time import sleep
from os import path as pa
from os import mkdir

import ttkbootstrap as ttk

# è‡ªå®šä¹‰å‡½æ•°è°ƒç”¨
# import func.flier as fl
# import func.udp17F as u17F
# import func.udp31B as u31B
# import func.udp146 as u146
# import func.udp5B3 as u5B3
# import func.rel as rel

# ç±»
class app(ttk.Frame):
    def __init__(self, win):
        super().__init__(win) # app = ttk.Frame(win)
        self.pack() # app.pack()

        # å®¹å™¨
        self.sv = ttk.StringVar() # ä¸»é¢˜å
        self.sv2 = ttk.StringVar() # logè·¯å¾„
        self.iv = ttk.IntVar(value=1) # 17F
        self.iv2 = ttk.IntVar(value=0) # 31B
        self.iv3 = ttk.IntVar(value=1) # 146
        self.iv4 = ttk.IntVar(value=0)  # rel
        self.iv5 = ttk.IntVar(value=0)  # 5B3

        # å¤–æ¡†
        f = ttk.Frame(padding=10)
        f.pack(fill=X, expand=YES, anchor=N)

        # æ‹–å…¥è¯»å–
        hook_dropfiles(f, func=self.fun6)

        # å†…æ¡†
        self.f2 = ttk.Frame(f, padding=10)
        self.lf = ttk.LabelFrame(f, text='æ—¥å¿—', padding=10)
        self.lf2 = ttk.LabelFrame(f, text='ä¿¡å·', padding=10)
        self.lf3 = ttk.LabelFrame(f, text='æ“ä½œ', padding=10)

        self.f2.pack(fill=X, expand=YES)
        self.lf.pack(fill=X, expand=YES, pady=(0, 10))
        self.lf2.pack(fill=X, expand=YES, pady=(0, 10))
        self.lf3.pack(fill=X, expand=YES)

        # è¡Œ
        self.row()
        self.row2()
        self.row3()
        self.row4()

    def row(self):
        '''ä¸»é¢˜æ '''
        f = self.f2
        sv = self.sv
        s = ttk.Style()
        tn = s.theme_names()
        i = tn.index(s.theme.name) # åˆå§‹ç´¢å¼•å€¼ï¼šmorphä¸»é¢˜ä¸º 9
        # print(i)

        b = ttk.Button(f, text='å…³äº', command=self.fun)
        l = ttk.Label(f, text='ä¸»é¢˜')
        self.tm = ttk.Combobox(f, width=15, values=tn, textvariable=sv)
        self.tm.current(i) # åˆå§‹ä¸»é¢˜
        b2 = ttk.Button(f, text='åº”ç”¨', command=self.fun2)

        b.pack(side=LEFT, padx=(0,10))
        b2.pack(side=RIGHT, padx=(10,0))
        self.tm.pack(side=RIGHT, padx=(10,0))
        l.pack(side=RIGHT, padx=(10,0))
    def row2(self):
        '''æ—¥å¿—æ '''
        lf = self.lf
        sv = self.sv2

        l = ttk.Label(lf, text='è·¯å¾„')
        e = ttk.Entry(lf, width=40, textvariable=sv)
        b = ttk.Button(lf, text='æµè§ˆ', width=10, command=self.fun3)

        l.pack(side=LEFT, padx=10)
        e.pack(side=LEFT, padx=10, fill=X, expand=YES)
        b.pack(side=LEFT, padx=10)
    def row3(self):
        '''ä¿¡å·æ '''
        lf = self.lf2
        iv = self.iv
        iv2 = self.iv2
        iv3 = self.iv3
        iv4 = self.iv4
        iv5 = self.iv5

        cb = ttk.Checkbutton(lf,text='17F', variable=iv, onvalue=1, offvalue=0)
        cb2 = ttk.Checkbutton(lf,text='31B', variable=iv2, onvalue=1, offvalue=0)
        cb3 = ttk.Checkbutton(lf,text='146', variable=iv3, onvalue=1, offvalue=0)
        cb4 = ttk.Checkbutton(lf, text='REL', variable=iv4, onvalue=1, offvalue=0)
        cb5 = ttk.Checkbutton(lf, text='5B3', variable=iv5, onvalue=1, offvalue=0)

        cb.pack(side=LEFT, padx=10)
        cb3.pack(side=LEFT, padx=10)
        cb2.pack(side=LEFT, padx=10)
        cb5.pack(side=LEFT, padx=10)
        cb4.pack(side=LEFT, padx=10)
    def row4(self):
        '''æ“ä½œæ '''
        lf = self.lf3

        self.b = ttk.Button(lf, text='ç”Ÿæˆcsv', command=self.fun4)
        self.pb = ttk.Progressbar(lf, maximum=100, bootstyle='success-striped')

        self.b.pack(padx=10, fill=X, expand=YES)
        self.pb.pack(padx=10, fill=X, expand=YES)

    def fun(self):
        '''å…³äº'''
        showinfo('å…³äº ä»¥å¤ªç½‘æŠ¥æ–‡è§£æå·¥å…·',
                               'ä½œè€…ï¼šJerå°é“­ğŸ˜ \n'
                               'æŠ€æœ¯æ”¯æŒï¼šMavisğŸ¤£ \n'
                               'å»ºè®®æä¾›ï¼šå°‘åŸºåŒå­¦ğŸ¤ª \n'
                               'æ€è·¯æä¾›ï¼šå®¶æ–‡åŒå­¦ğŸ˜ \n'
                               'æµ‹è¯•éªŒè¯ï¼šå°‘ä¸½åŒå­¦ğŸ¤¨ \n'
                               'ç¼ºé™·æå‡ºï¼šè²èŠ±åŒå­¦ğŸ¤“ \n'
                               'å¼€å‘æŒ‡å¯¼ï¼šåª›åª›åŒå­¦ğŸ¤  \n'
                               'æŠ€æœ¯æŒ‡å¯¼ï¼šåšè²å¤§ä½¬ğŸ§ \n\n' 
                               'æ„Ÿè°¢å„ä½åŒå­¦å’Œå¤§ä½¬çš„æ”¯æŒã€‚^0^'
                               )
    def fun2(self):
        '''åº”ç”¨ä¸»é¢˜'''
        s = ttk.Style()
        cb = self.tm.get()

        s.theme_use(cb)
        print(f'åº”ç”¨ä¸»é¢˜:{cb}')
    def fun3(self):
        '''æµè§ˆæ–‡ä»¶'''
        sv = self.sv2
        path = filedialog.askopenfilename(title='é€‰æ‹©æ—¥å¿—æ–‡ä»¶')
        if path:
            sv.set(path)
    def fun4(self):
        '''ç”Ÿæˆcsv'''
        t, t2, t3, t4, t5, t6, t7 = self.sv.get(), self.sv2.get(), self.iv.get(), self.iv2.get(), self.iv3.get(), self.iv4.get(), self.iv5.get()

        f = self.fun5
        pb = self.pb # è¿›åº¦æ¡
        b = self.b # æŒ‰é’®

        print(f'å½“å‰è®¾å®š:\nä¸»é¢˜:{t}\nè·¯å¾„:{t2}\n17F:{t3}\n146:{t5}\n31B:{t4}\n5B3:{t7}\nrel:{t6}\n')

        # åˆ›å»ºcacheæ–‡ä»¶å¤¹
        if not pa.exists('cache'):
            mkdir('cache')

        # è¿‡æ»¤æ•°æ®
        # fl.log_0011(t2),f(1,10,'ç­›é€‰0011æ•°æ®ä¸­...')
        #
        # # åˆ›å»ºcsvæ–‡ä»¶å¤¹
        # if not pa.exists('csv'):
        #     mkdir('csv')
        #
        # # è¾“å‡º
        # if t3 == 1:
        #     fl.log_17F(),f(11,20,'17Fæ•°æ®å¤„ç†ä¸­...')
        #     u17F.csv(),f(21,30,'17Fæ•°æ®ç”Ÿæˆä¸­...')
        # if t5 == 1:
        #     fl.log_146(),f(31,40,'146æ•°æ®å¤„ç†ä¸­...')
        #     u146.csv(),f(41,50,'146ç”Ÿæˆå¤„ç†ä¸­...')
        # if t4 == 1:
        #     fl.log_31B(),f(51,60,'31Bæ•°æ®å¤„ç†ä¸­...')
        #     u31B.csv(),f(61,70,'31Bæ•°æ®ç”Ÿæˆä¸­...')
        # if t7 == 1:
        #     fl.log_5B3(),f(71,80,'5B3æ•°æ®å¤„ç†ä¸­...')
        #     u5B3.csv(),f(81,90,'5B3ç”Ÿæˆå¤„ç†ä¸­...')
        # if t6 == 1:
        #     if not pa.exists('cache/log_17F.txt'):
        #         fl.log_17F(), f(11, 20, '17Fæ•°æ®å¤„ç†ä¸­...')
        #         u17F.csv(), f(21, 30, '17Fæ•°æ®ç”Ÿæˆä¸­...')
        #     if not pa.exists('cache/log_146.txt'):
        #         fl.log_146(), f(31, 40, '146æ•°æ®å¤„ç†ä¸­...')
        #         u146.csv(), f(41, 50, '146ç”Ÿæˆå¤„ç†ä¸­...')
        #     fl.log_rel()
        #     rel.csv()

        f(91,99,'csvæ–‡ä»¶ç”Ÿæˆä¸­...')

        pb['value'] = 100
        b['text'] = 'csvæ–‡ä»¶å·²ç”Ÿæˆ^-^'

        # å¼¹çª—æç¤º
        showinfo('(*^â–½^*) Yeah~','csvæ–‡ä»¶å·²ç”Ÿæˆåœ¨æ ¹ç›®å½•')
        b.config(state=NORMAL)

        # åˆå§‹åŒ–è¿›åº¦æ¡
        pb['value'] = 0
        b['text'] = 'ç”Ÿæˆcsv'
    def fun5(self, i, j, l):
        '''è¿›åº¦æ›´æ–°'''
        pb = self.pb # è¿›åº¦æ¡
        b = self.b # æŒ‰é’®
        j = j + 2
        for k in range(i,j):
            pb['value'] = k  # ä¿®æ”¹è¿›åº¦
            pb.update()
            b['text'] = f'è¿›åº¦:{k}% {l}' # ä¿®æ”¹æŒ‰é’®æ–‡æœ¬
            sleep(0.02)
    def fun6(self, a):
        '''æ‹–å…¥è¯»å–'''
        sv = self.sv2
        p = '\n'.join((item.decode('gbk') for item in a))
        sv.set(p)

if __name__ == '__main__':
    w = ttk.Window('----------è°ƒè¯•çª—å£----------','litera')
    w.geometry('+640+340')
    app(w)
    l = ttk.Label(text='----------ç‰ˆæœ¬ï¼šDemo----------')
    l.pack(side=RIGHT, padx=10)
    w.mainloop()
```

# inié…ç½®æ–‡ä»¶çš„ä½¿ç”¨

```ini
[mysql]
host=127.0.0.1
port=3306
user=root
password=yourpassword
dbname=test


[redis]
host=127.0.0.1
port=6379
password=88888
db=0
```

```python
import os
from configparser import ConfigParser

file_path = os.path.join(os.path.dirname(os.path.abspath(__file__)), "monitor_config.ini")
cf = ConfigParser()

cf.read('monitor_config.ini', encoding='utf-8')

print(cf.sections())        # ['mysql', 'redis']
print(cf.options('mysql'))  # è¾“å‡ºmysqlä¸‹çš„æ‰€æœ‰é…ç½®é¡¹
print(cf.items('mysql'))    # è¾“å‡ºmysqlä¸‹çš„æ‰€æœ‰é”®å€¼å¯¹

print(cf.get('mysql', 'host'))  # è¾“å‡ºmysql ä¸‹é…ç½®é¡¹hostçš„å€¼
print(cf.getint('mysql', 'port'))  # è¾“å‡ºport
```

# è®¡ç®—å‡½æ•°è¿è¡Œæ—¶é—´

```python
if __name__ == '__main__':
    from time import time
    a = time()

    fun()

    b = time()
    c = '%.2f' % float(b-a)
    print(f'è¿è¡Œæ—¶é—´ï¼š{c}ç§’')
```

# Subprocesså‡½æ•°çš„ä½¿ç”¨ï¼ˆadbäº¤äº’ï¼‰

[adb.py](./adb.py)

```python
from subprocess import *
from byte import ret_byte
from str import ret_str


def ret_out_err(a:list):
    pop = Popen('adb shell', stdin=PIPE, stdout=PIPE, stderr=PIPE)
    a = ret_byte(a)
    out, err = pop.communicate(input=a, timeout=1000)
    out, err = ret_str(out), ret_str(err)
    return out, err

if __name__ == '__main__':
    a = ['ls','exit']
    b = ['cat /oemdata/configs/7B120-1.cfg | grep ICCID','exit']
    c = ['cat /oemdata/configs/7B120-1.cfg | grep SN','exit']
    d = ['cat /oemdata/configs/7B120-1.cfg | grep ware','exit']
    e = ['export DBUS_SESSION_BUS_ADDRESS=`cat /tmp/.default-msgbus-session-address` ',
         'dbus-send --session --type=method_call --print-reply  --dest=com.yuantel.tbox.file    /com/yuantel/tbox/file  com.yuantel.tbox.file.cfg_data_set string:server string:ecall_auto_num string:01056162092',
         'exit']

    out, err = ret_out_err(d)
    print(out, err)
```

[byte.py](./byte.py)

```python
def ret_byte(a:list):
    a = "\n".join(a) + "\n"
    a = a.encode('utf-8')
    return a

if __name__ == '__main__':
    a = ['ls','exit']
    b = ['cat /oemdata/configs/7B120-1.cfg | grep ICCID','exit']
    c = ['cat /oemdata/configs/7B120-1.cfg | grep SN','exit']
    d = ['cat /oemdata/configs/7B120-1.cfg | grep ware','exit']
    e = ['export DBUS_SESSION_BUS_ADDRESS=`cat /tmp/.default-msgbus-session-address` ',
         'dbus-send --session --type=method_call --print-reply  --dest=com.yuantel.tbox.file    /com/yuantel/tbox/file  com.yuantel.tbox.file.cfg_data_set string:server string:ecall_auto_num string:01056162092',
         'exit']

    print(ret_byte(d))
```

[str.py](./str.py)

```python
def ret_str(a:bytes):
    a = a.decode('utf-8')
    a = a.replace('\r','')
    return a

if __name__ == '__main__':
    a = b'ls\r\r\nexit\r\r\n/ # ls\r\r\nWEBSERVER       etc             oemapp          run             tmp\r\r\nbin             firmware        oemappbak       sbin            usr\r\r\nboot            home            oemappbakromfs  sdcard          var\r\r\nbuild.prop      lib             oemappromfs     share\r\r\ncache           linuxrc         oemdata         sys\r\r\ndata            media           oemlog          system\r\r\ndev             mnt             proc            target\r\r\n/ # exit\r\r\n'
    b = b'cat /oemdata/configs/7B120-1.cfg | grep ICCID\r\r\nexit\r\r\n/ # cat /oemdata/configs/7B120-1.cfg | grep ICCID\r\r\n    ICCID="89860920740036750510";\r\r\n/ # exit\r\r\n'
    c = b'cat /oemdata/configs/7B120-1.cfg | grep SN\r\r\nexit\r\r\n/ # cat /oemdata/configs/7B120-1.cfg | grep SN\r\r\n    TBOXSN="C52XBDLM11190020";\r\r\n/ # exit\r\r\n'
    d = b'cat /oemdata/configs/7B120-1.cfg | grep ware\r\r\nexit\r\r\n/ # cat /oemdata/configs/7B120-1.cfg | grep ware\r\r\n      tbox_software = "1.09";\r\r\n      tbox_hardware = "1.00";\r\r\n      mcu_software = "220815V1.0";\r\r\n      um220_software="R3.6.0.0Build7723";\r\r\n      ec20_firmware = "EC20CEFARGR07A01M4G_OCPU_AMT";\r\r\n/ # exit\r\r\n'
    e = b'export DBUS_SESSION_BUS_ADDRESS=`cat /tmp/.default-msgbus-session-address` \r\r\ndbus-send --session --type=method_call --print-reply  --dest=com.yuantel.tbox.file    /com/yuantel/tbox/file  com.yuantel.tbox.file.cfg_data_set string:server string:ecall_auto_num string:01056162092\r\r\nexit\r\r\n/ # export DBUS_SESSION_BUS_ADDRESS=`cat /tmp/.default-msgbus-session-address` \r\r\n/ # dbus-send --session --type=method_call --print-reply  --dest=com.yuantel.tbo\r\r\r\nx.file    /com/yuantel/tbox/file  com.yuantel.tbox.file.cfg_data_set string:serv\r\r\r\ner string:ecall_auto_num string:01056162092\r\r\nmethod return sender=:1.0 -> dest=:1.9 reply_serial=2\r\r\n/ # exit\r\r\n'

    print(ret_str(d))
```
